Codul meu implementeaza jocul Battleships folosind alocare dinamica a memoriri pt tablele de joc.Task ul 1 contine implementarea jocului iar task ul 2 face o analiza statistica, procesează datele din meciurile jucate pentru a calcula acuratețea jucătorilor.Am modularizat codul in 3 fisiere (battleships.c: conține funcția main;battleships_functions.c: implementarea functilor;battleships.h: definițiile structurilor și antetele funcțiilor)
Task 1:
Am folosit structura jucator pentru a grupa toate datele necesare unui participant: tabla proprie (unde își pune navele), tabla de atac (unde marchează loviturile), vectorul de nave și contoare pentru navele distruse. Navele sunt reținute în structura nava, care stochează coordonatele, lungimea, orientarea și numărul de lovituri primite (hits), pentru a ști rapid când o navă este scufundată.Deoarece dimensiunile tablei (N x M) variază, am folosit alocare dinamică (malloc). Am avut grijă să verific mereu dacă alocarea a reușit și să eliberez memoria la final folosind funcția cleanup_joc.Pentru plasarea navelor Citesc coordonatele navelor și verific validitatea lor (să fie în interiorul hărții și să nu se suprapună). Funcția nava_valida se ocupă de aceste verificări.Pentru atac alternez turele si pentru fiecare lovitura verific ce se afla la coordonatele respective.Daca e apa marchez cu R(ratare) daca e nava marchez cu H (Hit) și incrementez contorul de lovituri al navei respective si daca coordonatele sunt capul unei nave pun X(distrus).De asemenea Dacă loviturile sunt egale cu lungimea navei apelez marcheaza_scufundata pentru a contura nava cu 0 pe harta adversarului (marchez zona din jurul ei) și pun X pe tabla de atac.Pentru a afisa castigatorul verific mereu dupa un atac daca navele distruse sunt egale cu numarul de nave.
Task 2:
Am creat structura InfoPartida în care am salvat, încă din timpul jocului (din funcția etapa_atac), numărul de lovituri reușite și numărul total de atacuri valide pentru fiecare jucător.La finalul jocurilor citesc comenzile.Am folosit strncpy pentru a extrage corect indexul jocului, ținta (target ul de acuratețe) și tipul cerinței.Pentru logica matematica am determinat numărul minim de meciuri care trebuie modificate pentru a atinge o anumită medie.Calculez media ponderata tinand cont de numarul de nave din fiecare meci (ponderea).Pentru MIN am sortat meciurile descrescător în funcție de castig potential. Modific întâi meciurile care, dacă ar deveni perfecte (100% acuratețe), ar ridica cel mai mult media globală.Pentru MAX am sortat meciurile în funcție de impact. Modific meciurile care trag media în sus cel mai tare, transformându-le în meciuri cu 0 acuratețe, până când media scade sub pragul cerut.La cerința MAX, am facut o verificare: dacă transformarea unui meci scade media prea mult, verific dacă pot să renunț la acea modificare, pentru a păstra numărul de modificări la un nivel optim.
